
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{r as O,I as q}from"./item-Dl14o0dJ.js";import{_ as w}from"./sub.vue_vue_type_script_setup_true_lang-BK6qXHlM.js";import{d as x,r as v,J as k,a8 as P,a9 as z,o as i,l as p,F as M,$ as A,c as S,n as $,q as j,aa as F}from"./index-Bon7VqDN.js";const D=x({name:"MainMenu",__name:"index",props:{menu:{},value:{},mode:{default:"vertical"},collapse:{type:Boolean,default:!1},showCollapseName:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1},direction:{default:"ltr"}},setup(b){const u=b,s=v(u.value),o=v({}),t=v({}),c=v([]),B=v([]);function _(e,l=[]){e.forEach(a=>{const n=a.path??JSON.stringify(a);if(a.children){const f=[...l,n];t.value[n]={index:n,indexPath:f,active:!1},_(a.children,f)}else o.value[n]={index:n,indexPath:l}})}const y=e=>{c.value.includes(e)||c.value.push(e)},h=e=>{if(Array.isArray(e)){F(()=>{h(e.at(-1)),e.length>1&&h(e.slice(0,-1))});return}Object.keys(t.value).forEach(l=>{t.value[l].indexPath.includes(e)&&(c.value=c.value.filter(a=>a!==e))})};function g(e){var l,a;for(const n in t.value)t.value[n].active=!1;(l=t.value[e])==null||l.indexPath.forEach(n=>{t.value[n].active=!0}),(a=o.value[e])==null||a.indexPath.forEach(n=>{t.value[n].active=!0})}const C=e=>{(u.mode==="horizontal"||u.collapse)&&(c.value=[]),g(e)},E=e=>{c.value.includes(e)?h(e):y(e)};function m(){const e=s.value&&o.value[s.value];g(s.value),!(!e||u.collapse)&&e.indexPath.forEach(l=>{t.value[l]&&y(l)})}return k(()=>u.menu,e=>{_(e),m()},{deep:!0,immediate:!0}),k(()=>u.value,e=>{o.value[e]||(s.value="");const l=o.value[e]||s.value&&o.value[s.value]||o.value[u.value];l?s.value=l.index:s.value=e,m()}),k(()=>u.collapse,e=>{e&&(c.value=[]),m()}),P(O,z({props:u,items:o,subMenus:t,activeIndex:s,openedMenus:c,mouseInMenu:B,openMenu:y,closeMenu:h,handleMenuItemClick:C,handleSubMenuClick:E})),(e,l)=>(i(),p("div",{class:j(["h-full w-full flex flex-col of-hidden transition-all",{"flex-row! w-auto!":u.mode==="horizontal","py-1":u.mode==="vertical"}])},[(i(!0),p(M,null,A(e.menu,a=>{var n,f,I;return i(),p(M,{key:a.path??JSON.stringify(a)},[((n=a.meta)==null?void 0:n.menu)!==!1?(i(),p(M,{key:0},[(f=a.children)!=null&&f.length?(i(),S(w,{key:0,menu:a,"unique-key":[a.path??(a.children.every(d=>{var r;return((r=d.meta)==null?void 0:r.menu)===!1})?a.children[0].path:JSON.stringify(a))]},null,8,["menu","unique-key"])):(i(),S(q,{key:1,item:a,"unique-key":[a.path??((I=a.children)!=null&&I.every(d=>{var r;return((r=d.meta)==null?void 0:r.menu)===!1})?a.children[0].path:JSON.stringify(a))],onClick:d=>{var r;return C(a.path??((r=a.children)!=null&&r.every(J=>{var N;return((N=J.meta)==null?void 0:N.menu)===!1})?a.children[0].path:JSON.stringify(a)))}},null,8,["item","unique-key","onClick"]))],64)):$("",!0)],64)}),128))],2))}});export{D as _};
//# sourceMappingURL=index.vue_vue_type_script_setup_true_lang-BZeUAmOW.js.map
