{"version":3,"file":"index-Cup9HZyr.js","sources":["../../src/layouts/components/Header/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport useMenuStore from '@/store/modules/menu'\nimport useSettingsStore from '@/store/modules/settings'\nimport Logo from '../Logo/index.vue'\nimport Menu from '../Menu/index.vue'\nimport MenuPanel from '../MenuPanel/index.vue'\nimport ToolbarRightSide from '../Topbar/Toolbar/rightSide.vue'\n\ndefineOptions({\n  name: 'LayoutHeader',\n})\n\nconst route = useRoute()\n\nconst settingsStore = useSettingsStore()\nconst menuStore = useMenuStore()\n\nconst { generateI18nTitle, switchTo } = useMenu()\n\nfunction iconName(isActive: boolean, icon?: string, activeIcon?: string) {\n  let name\n  if ((!isActive && icon) || (isActive && !activeIcon)) {\n    name = icon\n  }\n  else if (isActive && activeIcon) {\n    name = activeIcon\n  }\n  return name\n}\n\nconst menuRef = useTemplateRef('menuRef')\n\n// 顶部模式鼠标滚动\nfunction handlerMouserScroll(event: WheelEvent) {\n  if (event.deltaY || event.detail !== 0) {\n    menuRef.value?.scrollBy({\n      left: (event.deltaY || event.detail) > 0 ? 50 : -50,\n    })\n  }\n}\n</script>\n\n<template>\n  <Transition name=\"header\">\n    <header v-if=\"settingsStore.mode === 'pc' && ['head', 'only-head', 'head-panel', 'customized'].includes(settingsStore.settings.menu.mode)\">\n      <div class=\"header-container\">\n        <Logo class=\"title\" />\n        <div ref=\"menuRef\" class=\"menu-container scrollbar-none\" @wheel.prevent=\"handlerMouserScroll\">\n          <!-- 顶部模式 -->\n          <div\n            v-if=\"settingsStore.settings.menu.mode === 'head'\" class=\"menu h-full flex of-hidden transition-all\" :class=\"{\n              [`menu-active-${settingsStore.settings.menu.style}`]: settingsStore.settings.menu.style !== '',\n            }\"\n          >\n            <template v-for=\"(item, index) in menuStore.allMenus\" :key=\"index\">\n              <div\n                class=\"menu-item relative mx-1 py-2 transition-all\" :class=\"{\n                  active: index === menuStore.actived,\n                }\"\n              >\n                <div\n                  v-if=\"item.children && item.children.length !== 0\" class=\"group menu-item-container h-full w-full flex cursor-pointer items-center justify-between gap-1 px-3 text-[var(--g-header-menu-color)] transition-all hover-bg-[var(--g-header-menu-hover-bg)] hover-text-[var(--g-header-menu-hover-color)]\" :class=\"{\n                    'text-[var(--g-header-menu-active-color)]! bg-[var(--g-header-menu-active-bg)]!': index === menuStore.actived,\n                    'rounded-lg': settingsStore.settings.menu.isRounded,\n                  }\" :title=\"generateI18nTitle(item.meta?.title)\" @click=\"switchTo(index)\"\n                >\n                  <div class=\"inline-flex flex-1 items-center justify-center gap-1\">\n                    <SvgIcon v-if=\"iconName(index === menuStore.actived, item.meta?.icon, item.meta?.activeIcon)\" :name=\"iconName(index === menuStore.actived, item.meta?.icon, item.meta?.activeIcon)!\" class=\"menu-item-container-icon transition-transform group-hover-scale-120\" />\n                    <span class=\"w-full flex-1 truncate text-sm transition-height transition-opacity transition-width\">\n                      {{ generateI18nTitle(item.meta?.title) }}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </template>\n          </div>\n          <!-- 顶部精简模式 -->\n          <Menu\n            v-else-if=\"settingsStore.settings.menu.mode === 'only-head'\" :menu=\"menuStore.allMenus\" :value=\"route.meta.activeMenu || route.path\" mode=\"horizontal\" show-collapse-name :rounded=\"settingsStore.settings.menu.isRounded\" :direction=\"settingsStore.settings.app.direction\" class=\"menu\" :class=\"{\n              [`menu-active-${settingsStore.settings.menu.style}`]: settingsStore.settings.menu.style !== '',\n            }\"\n          />\n          <!-- 顶部面板模式 -->\n          <MenuPanel\n            v-else-if=\"settingsStore.settings.menu.mode === 'head-panel'\" :menu=\"menuStore.allMenus\" :value=\"route.meta.activeMenu || route.path\" mode=\"horizontal\" show-collapse-name :rounded=\"settingsStore.settings.menu.isRounded\" panel :direction=\"settingsStore.settings.app.direction\" class=\"menu\" :class=\"{\n              [`menu-active-${settingsStore.settings.menu.style}`]: settingsStore.settings.menu.style !== '',\n            }\"\n          />\n        </div>\n        <ToolbarRightSide />\n      </div>\n    </header>\n  </Transition>\n</template>\n\n<style scoped>\n[data-app-width-mode=\"center\"],\n[data-app-width-mode=\"center-max-width\"] {\n  header {\n    width: var(--g-app-width);\n    max-width: 100%;\n  }\n}\n\nheader {\n  position: fixed;\n  top: 0;\n  right: 0;\n  left: 0;\n  z-index: 2000;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  height: var(--g-header-height);\n  padding: 0 20px;\n  margin: 0 auto;\n  color: var(--g-header-color);\n  background-color: var(--g-header-bg);\n  box-shadow: -1px 0 0 0 var(--g-border-color), 1px 0 0 0 var(--g-border-color), 0 1px 0 0 var(--g-border-color);\n  transition: background-color 0.3s;\n\n  .header-container {\n    display: flex;\n    gap: 30px;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n    max-width: var(--g-header-width);\n    height: 100%;\n    margin: 0 auto;\n\n    :deep(a.title) {\n      position: relative;\n      flex: 0;\n      width: inherit;\n      height: inherit;\n      padding: inherit;\n      background-color: inherit;\n\n      .logo {\n        width: initial;\n        height: 40px;\n      }\n\n      span {\n        font-size: 20px;\n        color: var(--g-header-color);\n        letter-spacing: 1px;\n      }\n    }\n\n    .menu-container {\n      flex: 1;\n      height: 100%;\n      padding: 0 20px;\n      overflow-x: auto;\n      mask-image: linear-gradient(to right, transparent, #000 20px, #000 calc(100% - 20px), transparent);\n\n      .menu-active {\n        &-arrow {\n          .item-container::before,\n          :deep(.menu-item::before) {\n            position: absolute;\n            bottom: 0;\n            left: 50%;\n            width: 0;\n            height: 0;\n            content: \"\";\n            border-right: 5px solid transparent;\n            border-bottom: 5px solid var(--g-header-bg);\n            border-left: 5px solid transparent;\n            opacity: 0;\n            transition: all 0.3s;\n            transform: translateX(-50%);\n          }\n\n          .item-container.active::before,\n          :deep(.menu-item.active::before) {\n            bottom: 8px;\n            opacity: 1;\n          }\n        }\n\n        &-line {\n          .item-container::before,\n          :deep(.menu-item::before) {\n            position: absolute;\n            bottom: 6px;\n            left: 50%;\n            width: 0;\n            height: 4px;\n            content: \"\";\n            background-color: var(--g-header-menu-active-bg);\n            border-radius: 2px;\n            box-shadow: 0 0 0 1px var(--g-header-bg);\n            opacity: 0;\n            transition: all 0.3s;\n            transform: translateX(-50%);\n          }\n\n          .item-container.active::before,\n          :deep(.menu-item.active::before) {\n            width: 20px;\n            opacity: 1;\n          }\n        }\n\n        &-dot {\n          .item-container::before,\n          :deep(.menu-item::before) {\n            position: absolute;\n            bottom: 0;\n            left: 50%;\n            width: 10px;\n            height: 10px;\n            content: \"\";\n            background-color: var(--g-header-menu-active-bg);\n            border-radius: 50%;\n            box-shadow: 0 0 0 1px var(--g-main-sidebar-bg);\n            opacity: 0;\n            transition: all 0.3s;\n            transform: translateX(-50%);\n          }\n\n          .item-container.active::before,\n          :deep(.menu-item.active::before) {\n            bottom: 4px;\n            opacity: 1;\n          }\n        }\n      }\n\n      .menu {\n        display: inline-flex;\n\n        :deep(.menu-item) {\n          .menu-item-container {\n            color: var(--g-header-menu-color);\n\n            &:hover {\n              color: var(--g-header-menu-hover-color);\n              background-color: var(--g-header-menu-hover-bg);\n            }\n\n            .menu-item-container-icon {\n              font-size: 20px !important;\n            }\n          }\n\n          &.active .menu-item-container {\n            color: var(--g-header-menu-active-color) !important;\n            background-color: var(--g-header-menu-active-bg) !important;\n          }\n        }\n      }\n    }\n  }\n}\n\n/* 头部动画 */\n.header-enter-active,\n.header-leave-active {\n  transition: transform 0.3s;\n}\n\n.header-enter-from,\n.header-leave-to {\n  transform: translateY(calc(var(--g-header-height) * -1));\n}\n</style>\n"],"names":["route","useRoute","settingsStore","useSettingsStore","menuStore","useMenuStore","generateI18nTitle","switchTo","useMenu","iconName","isActive","icon","activeIcon","name","menuRef","useTemplateRef","handlerMouserScroll","event","_a"],"mappings":"o+DAYA,MAAMA,EAAQC,IAERC,EAAgBC,IAChBC,EAAYC,IAEZ,CAAE,kBAAAC,EAAmB,SAAAC,CAAS,EAAIC,EAAQ,EAEvC,SAAAC,EAASC,EAAmBC,EAAeC,EAAqB,CACnE,IAAAC,EACJ,MAAK,CAACH,GAAYC,GAAUD,GAAY,CAACE,EAChCC,EAAAF,EAEAD,GAAYE,IACZC,EAAAD,GAEFC,CACT,CAEM,MAAAC,EAAUC,EAAe,SAAS,EAGxC,SAASC,EAAoBC,EAAmB,QAC1CA,EAAM,QAAUA,EAAM,SAAW,MACnCC,EAAAJ,EAAQ,QAAR,MAAAI,EAAe,SAAS,CACtB,MAAOD,EAAM,QAAUA,EAAM,QAAU,EAAI,GAAK,GAAA,GAGtD"}