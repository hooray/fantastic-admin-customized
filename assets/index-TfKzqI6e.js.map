{"version":3,"file":"index-TfKzqI6e.js","sources":["../../src/layouts/components/MainSidebar/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport useMenuStore from '@/store/modules/menu'\nimport useSettingsStore from '@/store/modules/settings'\nimport Logo from '../Logo/index.vue'\nimport Menu from '../Menu/index.vue'\nimport MenuPanel from '../MenuPanel/index.vue'\n\ndefineOptions({\n  name: 'MainSidebar',\n})\n\nconst route = useRoute()\n\nconst settingsStore = useSettingsStore()\nconst menuStore = useMenuStore()\n\nconst { generateI18nTitle, switchTo } = useMenu()\n\nfunction iconName(isActive: boolean, icon?: string, activeIcon?: string) {\n  let name\n  if ((!isActive && icon) || (isActive && !activeIcon)) {\n    name = icon\n  }\n  else if (isActive && activeIcon) {\n    name = activeIcon\n  }\n  return name\n}\n</script>\n\n<template>\n  <Transition name=\"main-sidebar\">\n    <div v-if=\"['side', 'only-side', 'side-panel', 'customized'].includes(settingsStore.settings.menu.mode) || (settingsStore.mode === 'mobile' && settingsStore.settings.menu.mode !== 'single')\" class=\"main-sidebar-container\">\n      <Logo v-if=\"settingsStore.settings.menu.mode !== 'customized'\" :show-title=\"false\" class=\"sidebar-logo\" />\n      <div class=\"menu scrollbar-none\">\n        <!-- 侧边栏模式（含主导航） -->\n        <div\n          v-if=\"settingsStore.settings.menu.mode === 'side' || settingsStore.settings.menu.mode === 'customized' || (settingsStore.mode === 'mobile' && settingsStore.settings.menu.mode !== 'single')\" class=\"w-full flex flex-col of-hidden py-1 transition-all\" :class=\"{\n            '-mt-2': settingsStore.settings.menu.mode !== 'customized',\n            [`menu-active-${settingsStore.settings.menu.style}`]: settingsStore.settings.menu.style !== '',\n          }\"\n        >\n          <template v-for=\"(item, index) in menuStore.allMenus\" :key=\"index\">\n            <div\n              class=\"menu-item relative px-2 py-1 transition-all\" :class=\"{\n                active: index === menuStore.actived,\n              }\"\n            >\n              <div\n                v-if=\"item.children && item.children.length !== 0\" class=\"group menu-item-container h-full w-full flex cursor-pointer items-center justify-between gap-1 py-4 text-[var(--g-main-sidebar-menu-color)] transition-all hover-bg-[var(--g-main-sidebar-menu-hover-bg)] hover-text-[var(--g-main-sidebar-menu-hover-color)] px-2!\" :class=\"{\n                  'text-[var(--g-main-sidebar-menu-active-color)]! bg-[var(--g-main-sidebar-menu-active-bg)]!': index === menuStore.actived,\n                  'rounded-lg': settingsStore.settings.menu.isRounded,\n                }\" :title=\"generateI18nTitle(item.meta?.title)\" @click=\"switchTo(index)\"\n              >\n                <div class=\"w-full inline-flex flex-1 items-center justify-center gap-1\" :class=\"{ 'flex-col': settingsStore.settings.menu.mainMenuDirection === 'vertical' }\">\n                  <SvgIcon v-if=\"iconName(index === menuStore.actived, item.meta?.icon, item.meta?.activeIcon)\" :name=\"iconName(index === menuStore.actived, item.meta?.icon, item.meta?.activeIcon)!\" class=\"menu-item-container-icon transition-transform group-hover-scale-120\" />\n                  <span class=\"w-full flex-1 truncate text-sm transition-height transition-opacity transition-width\" :class=\"{ 'text-center': settingsStore.settings.menu.mainMenuDirection === 'vertical' }\">\n                    {{ generateI18nTitle(item.meta?.title) }}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </template>\n        </div>\n        <!-- 侧边栏精简模式 -->\n        <Menu\n          v-else-if=\"settingsStore.settings.menu.mode === 'only-side'\" :menu=\"menuStore.allMenus\" :value=\"route.meta.activeMenu || route.path\" show-collapse-name collapse :rounded=\"settingsStore.settings.menu.isRounded\" :direction=\"settingsStore.settings.app.direction\" class=\"-mt-2\" :class=\"{\n            [`menu-active-${settingsStore.settings.menu.style}`]: settingsStore.settings.menu.style !== '',\n          }\"\n        />\n        <!-- 侧边栏面板模式 -->\n        <MenuPanel\n          v-else-if=\"settingsStore.settings.menu.mode === 'side-panel'\" :menu=\"menuStore.allMenus\" :value=\"route.meta.activeMenu || route.path\" show-collapse-name collapse :rounded=\"settingsStore.settings.menu.isRounded\" :direction=\"settingsStore.settings.app.direction\" class=\"-mt-2\" :class=\"{\n            [`menu-active-${settingsStore.settings.menu.style}`]: settingsStore.settings.menu.style !== '',\n          }\"\n        />\n      </div>\n    </div>\n  </Transition>\n</template>\n\n<style scoped>\n.main-sidebar-container {\n  position: relative;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n  width: var(--g-main-sidebar-width);\n  color: var(--g-main-sidebar-menu-color);\n  background-color: var(--g-main-sidebar-bg);\n  box-shadow: 1px 0 0 0 var(--g-border-color);\n  transition: background-color 0.3s, color 0.3s, box-shadow 0.3s;\n\n  .sidebar-logo {\n    background-color: var(--g-main-sidebar-bg);\n    transition: background-color 0.3s;\n  }\n\n  .menu-active {\n    &-arrow {\n      .item-container::before,\n      :deep(.menu-item::before) {\n        position: absolute;\n        inset-inline-end: -5px;\n        top: 50%;\n        width: 0;\n        height: 0;\n        content: \"\";\n        border-block: 5px solid transparent;\n        border-inline-end: 5px solid var(--g-main-sidebar-bg);\n        opacity: 0;\n        transition: all 0.3s;\n        transform: translateY(-50%);\n      }\n\n      .item-container.active::before,\n      :deep(.menu-item.active::before) {\n        inset-inline-end: 8px;\n        opacity: 1;\n      }\n    }\n\n    &-line {\n      .item-container::before,\n      :deep(.menu-item::before) {\n        position: absolute;\n        inset-inline-start: 6px;\n        top: 50%;\n        width: 4px;\n        height: 0;\n        content: \"\";\n        background-color: var(--g-main-sidebar-menu-active-bg);\n        border-radius: 2px;\n        box-shadow: 0 0 0 1px var(--g-main-sidebar-bg);\n        opacity: 0;\n        transition: all 0.3s;\n        transform: translateY(-50%);\n      }\n\n      .item-container.active::before,\n      :deep(.menu-item.active::before) {\n        height: 20px;\n        opacity: 1;\n      }\n    }\n\n    &-dot {\n      .item-container::before,\n      :deep(.menu-item::before) {\n        position: absolute;\n        inset-inline-start: 0;\n        top: 50%;\n        width: 10px;\n        height: 10px;\n        content: \"\";\n        background-color: var(--g-main-sidebar-menu-active-bg);\n        border-radius: 50%;\n        box-shadow: 0 0 0 1px var(--g-main-sidebar-bg);\n        opacity: 0;\n        transition: all 0.3s;\n        transform: translateY(-50%);\n      }\n\n      .item-container.active::before,\n      :deep(.menu-item.active::before) {\n        inset-inline-start: 4px;\n        opacity: 1;\n      }\n    }\n  }\n\n  .menu {\n    flex: 1;\n    overflow: hidden auto;\n    overscroll-behavior: contain;\n\n    :deep(.menu-item) {\n      .menu-item-container {\n        padding-block: 8px;\n        color: var(--g-main-sidebar-menu-color);\n\n        &:hover {\n          color: var(--g-main-sidebar-menu-hover-color);\n          background-color: var(--g-main-sidebar-menu-hover-bg);\n        }\n\n        .menu-item-container-icon {\n          font-size: 20px !important;\n        }\n      }\n\n      &.active .menu-item-container {\n        color: var(--g-main-sidebar-menu-active-color) !important;\n        background-color: var(--g-main-sidebar-menu-active-bg) !important;\n      }\n    }\n  }\n}\n\n/* 主侧边栏动画 */\n.main-sidebar-enter-active,\n.main-sidebar-leave-active {\n  transition: 0.3s;\n}\n\n.main-sidebar-enter-from,\n.main-sidebar-leave-to {\n  transform: translateX(calc(var(--g-main-sidebar-width) * -1));\n\n  [dir=\"rtl\"] & {\n    transform: translateX(var(--g-main-sidebar-width));\n  }\n}\n</style>\n"],"names":["route","useRoute","settingsStore","useSettingsStore","menuStore","useMenuStore","generateI18nTitle","switchTo","useMenu","iconName","isActive","icon","activeIcon","name"],"mappings":"g3BAWA,MAAMA,EAAQC,IAERC,EAAgBC,IAChBC,EAAYC,IAEZ,CAAE,kBAAAC,EAAmB,SAAAC,CAAS,EAAIC,EAAQ,EAEvC,SAAAC,EAASC,EAAmBC,EAAeC,EAAqB,CACnE,IAAAC,EACJ,MAAK,CAACH,GAAYC,GAAUD,GAAY,CAACE,EAChCC,EAAAF,EAEAD,GAAYE,IACZC,EAAAD,GAEFC,CACT"}