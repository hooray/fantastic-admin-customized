{"version":3,"file":"item-Dfh5p8ys.js","sources":["../../src/layouts/components/MenuPanel/types.ts","../../src/layouts/components/MenuPanel/item.vue"],"sourcesContent":["import type { Menu } from '#/global'\nimport type { InjectionKey } from 'vue'\n\nexport interface MenuItem {\n  index: string\n  indexPath: string[]\n  active?: boolean\n}\n\nexport interface MenuProps {\n  menu: Menu.recordRaw[]\n  value: string\n  mode?: 'horizontal' | 'vertical'\n  collapse?: boolean\n  showCollapseName?: boolean\n  rounded?: boolean\n  direction?: 'ltr' | 'rtl'\n}\n\nexport interface MenuInjection {\n  props: MenuProps\n  items: Record<string, MenuItem>\n  subMenus: Record<string, MenuItem>\n  activeIndex: MenuProps['value']\n  openedMenus: string[]\n  mouseInMenu: string[]\n  openMenu: (index: string) => void\n  closeMenu: (index: string | string[]) => void\n  handleMenuItemClick: (index: string) => void\n  handleSubMenuClick: (index: string) => void\n}\n\nexport const rootMenuInjectionKey = Symbol('rootMenu') as InjectionKey<MenuInjection>\n\nexport interface SubMenuProps {\n  uniqueKey: string[]\n  menu: Menu.recordRaw\n  level?: number\n}\n\nexport interface SubMenuItemProps {\n  uniqueKey: string[]\n  item: Menu.recordRaw\n  level?: number\n  subMenu?: boolean\n}\n","<script setup lang=\"ts\">\nimport type { SubMenuItemProps } from './types'\nimport { rootMenuInjectionKey } from './types'\n\ndefineOptions({\n  name: 'SubMenuItem',\n})\n\nconst props = withDefaults(\n  defineProps<SubMenuItemProps>(),\n  {\n    level: 0,\n    subMenu: false,\n  },\n)\n\nconst { generateI18nTitle } = useMenu()\n\nconst rootMenu = inject(rootMenuInjectionKey)!\n\nconst itemRef = ref<HTMLElement>()\n\nconst isActived = computed(() => {\n  return props.subMenu\n    ? rootMenu.subMenus[props.uniqueKey.at(-1)!].active\n    : rootMenu.activeIndex === props.uniqueKey.at(-1)!\n})\n\nconst icon = computed(() => {\n  let icon\n  if (props.item.meta?.icon) {\n    icon = props.item.meta.icon\n  }\n  if (isActived.value) {\n    if (props.item.meta?.activeIcon) {\n      icon = props.item.meta.activeIcon\n    }\n  }\n  return icon\n})\n\n// 缩进样式\nconst indentStyle = computed(() => `padding-inline-start: ${12 * (props.level - 1)}px`)\n\ndefineExpose({\n  ref: itemRef,\n})\n</script>\n\n<template>\n  <div\n    ref=\"itemRef\" class=\"menu-item relative transition-all\" :class=\"{\n      'active': isActived,\n      'py-1': level !== 0,\n      'py-1 px-2': level === 0 && rootMenu.props.mode === 'vertical',\n      'px-1 py-2': level === 0 && rootMenu.props.mode === 'horizontal',\n    }\"\n  >\n    <router-link v-slot=\"{ href, navigate }\" custom :to=\"uniqueKey.at(-1) ?? ''\">\n      <HTooltip :enable=\"level === 0 && !subMenu\" :text=\"generateI18nTitle(item.meta?.title)\" :placement=\"rootMenu.props.mode === 'vertical' ? 'right' : 'bottom'\" class=\"h-full w-full\">\n        <component\n          :is=\"subMenu ? 'div' : 'a'\" v-bind=\"{\n            ...(!subMenu && {\n              href: item.meta?.link ? item.meta.link : href,\n              target: item.meta?.newWindow || item.meta?.link ? '_blank' : '_self',\n              class: 'no-underline',\n            }),\n          }\" class=\"group menu-item-container h-full w-full flex items-center justify-between gap-1 px-2 py-2\" :class=\"{\n            ...(level !== 1 || (level === 1 && !subMenu)\n              ? {\n                'text-[var(--g-sub-sidebar-menu-color)] transition-all': true,\n                'cursor-pointer': !subMenu || level === 0,\n                'hover-bg-[var(--g-sub-sidebar-menu-hover-bg)] hover-text-[var(--g-sub-sidebar-menu-hover-color)]': !subMenu,\n                'text-[var(--g-sub-sidebar-menu-active-color)]! bg-[var(--g-sub-sidebar-menu-active-bg)]!': rootMenu.activeIndex === uniqueKey.at(-1)!,\n                'rounded-lg': rootMenu.props.rounded && level === 0,\n                'rounded-md': rootMenu.props.rounded && level !== 0,\n                'px-3!': level === 0,\n                'py-1!': level > 1,\n              }\n              : {\n                'bg-[var(--g-sub-sidebar-menu-hover-bg)] text-[var(--g-sub-sidebar-menu-hover-color)]': true,\n                'rounded-md': rootMenu.props.rounded,\n              }\n            ),\n          }\" :title=\"generateI18nTitle(item.meta?.title)\" v-on=\"{\n            ...(!subMenu && {\n              click: navigate,\n            }),\n          }\"\n        >\n          <div\n            class=\"inline-flex flex-1 items-center justify-center gap-1\" :class=\"{\n              'flex-col': level === 0 && rootMenu.props.mode === 'vertical',\n              'w-full': level === 0 && rootMenu.props.showCollapseName && rootMenu.props.mode === 'vertical',\n            }\" :style=\"indentStyle\"\n          >\n            <SvgIcon v-if=\"icon\" :name=\"icon\" :size=\"16\" class=\"menu-item-container-icon\" />\n            <span\n              v-if=\"!(level === 0 && !rootMenu.props.showCollapseName)\" class=\"w-0 flex-1 truncate text-sm transition-height transition-opacity transition-width\"\n              :class=\"{\n                'text-xs!': level > 1,\n                'opacity-0 w-0 h-0': level === 0 && !rootMenu.props.showCollapseName,\n                'w-full text-center': level === 0 && rootMenu.props.showCollapseName,\n              }\"\n            >\n              {{ generateI18nTitle(item.meta?.title) }}\n            </span>\n            <HBadge v-if=\"item.meta?.badge && level !== 0\" :value=\"typeof item.meta.badge === 'function' ? item.meta.badge() : item.meta.badge\" class=\"badge transform-scale-80\" />\n          </div>\n        </component>\n      </HTooltip>\n    </router-link>\n  </div>\n</template>\n\n<style scoped>\n.badge {\n  :deep(> span) {\n    inset-inline-start: initial !important;\n    inset-inline-end: 0;\n  }\n}\n</style>\n"],"names":["rootMenuInjectionKey","props","__props","generateI18nTitle","useMenu","rootMenu","inject","itemRef","ref","isActived","computed","icon","_a","_b","indentStyle","__expose"],"mappings":"qVAgCa,MAAAA,EAAuB,OAAO,UAAU,6ICxBrD,MAAMC,EAAQC,EAQR,CAAE,kBAAAC,GAAsBC,IAExBC,EAAWC,EAAON,CAAoB,EAEtCO,EAAUC,IAEVC,EAAYC,EAAS,IAClBT,EAAM,QACTI,EAAS,SAASJ,EAAM,UAAU,GAAG,EAAE,CAAE,EAAE,OAC3CI,EAAS,cAAgBJ,EAAM,UAAU,GAAG,EAAE,CACnD,EAEKU,EAAOD,EAAS,IAAM,SACtBC,IAAAA,EACA,OAAAC,EAAAX,EAAM,KAAK,OAAX,MAAAW,EAAiB,OACnBD,EAAOV,EAAM,KAAK,KAAK,MAErBQ,EAAU,QACRI,EAAAZ,EAAM,KAAK,OAAX,MAAAY,EAAiB,aACnBF,EAAOV,EAAM,KAAK,KAAK,YAGpBU,CAAA,CACR,EAGKG,EAAcJ,EAAS,IAAM,yBAAyB,IAAMT,EAAM,MAAQ,EAAE,IAAI,EAEzE,OAAAc,EAAA,CACX,IAAKR,CAAA,CACN"}