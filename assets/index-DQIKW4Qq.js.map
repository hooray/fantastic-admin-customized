{"version":3,"file":"index-DQIKW4Qq.js","sources":["../../src/layouts/components/Topbar/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport useSettingsStore from '@/store/modules/settings'\nimport Tabbar from './Tabbar/index.vue'\nimport Toolbar from './Toolbar/index.vue'\n\ndefineOptions({\n  name: 'Topbar',\n})\n\nconst settingsStore = useSettingsStore()\n\nconst enableToolbar = computed(() => {\n  const index = settingsStore.settings.toolbar.layout.findIndex(item => item === '->')\n  const enableToolbarLeftSide = settingsStore.settings.toolbar.layout.some((item, i) => {\n    if (i < index && item !== '->') {\n      if (settingsStore.settings.app.routeBaseOn === 'filesystem' && item === 'breadcrumb') {\n        return false\n      }\n      return settingsStore.settings.toolbar[item]\n    }\n    return false\n  })\n  return !['head', 'only-head'].includes(settingsStore.settings.menu.mode) || enableToolbarLeftSide\n})\n\nconst scrollTop = ref(0)\nconst scrollOnHide = ref(false)\nconst topbarHeight = computed(() => {\n  const tabbarHeight = settingsStore.settings.tabbar.enable ? Number.parseInt(getComputedStyle(document.documentElement || document.body).getPropertyValue('--g-tabbar-height')) : 0\n  const toolbarHeight = enableToolbar.value ? Number.parseInt(getComputedStyle(document.documentElement || document.body).getPropertyValue('--g-toolbar-height')) : 0\n  return tabbarHeight + toolbarHeight\n})\nonMounted(() => {\n  window.addEventListener('scroll', onScroll)\n})\nonUnmounted(() => {\n  window.removeEventListener('scroll', onScroll)\n})\nfunction onScroll() {\n  scrollTop.value = (document.documentElement || document.body).scrollTop\n}\nwatch(scrollTop, (val, oldVal) => {\n  scrollOnHide.value = settingsStore.settings.topbar.mode === 'sticky' && val > oldVal && val > topbarHeight.value\n})\n</script>\n\n<template>\n  <div\n    class=\"topbar-container\" :class=\"{\n      'has-tabbar': settingsStore.settings.tabbar.enable,\n      'has-toolbar': enableToolbar,\n      [`topbar-${settingsStore.settings.topbar.mode}`]: true,\n      'shadow': !settingsStore.settings.topbar.switchTabbarAndToolbar && scrollTop,\n      'hide': scrollOnHide,\n      'switch-tabbar-toolbar': settingsStore.settings.topbar.switchTabbarAndToolbar,\n    }\" data-fixed-calc-width\n  >\n    <Tabbar v-if=\"settingsStore.settings.tabbar.enable\" />\n    <Toolbar v-if=\"enableToolbar\" />\n  </div>\n</template>\n\n<style scoped>\n.topbar-container {\n  position: absolute;\n  top: var(--g-sub-main-sidebar-actual-height);\n  z-index: 999;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 1px 0 0 var(--g-border-color);\n  transition: width 0.3s, top 0.3s, transform 0.3s, box-shadow 0.3s;\n\n  &.topbar-fixed,\n  &.topbar-sticky {\n    position: fixed;\n\n    &.shadow {\n      box-shadow: 0 10px 10px -10px var(--g-box-shadow-color);\n    }\n  }\n\n  &.topbar-sticky.hide {\n    top: calc((var(--g-tabbar-height) + var(--g-toolbar-height)) * -1) !important;\n  }\n\n  &.switch-tabbar-toolbar {\n    flex-direction: column-reverse;\n  }\n}\n</style>\n"],"names":["settingsStore","useSettingsStore","enableToolbar","computed","index","item","enableToolbarLeftSide","i","scrollTop","ref","scrollOnHide","topbarHeight","tabbarHeight","toolbarHeight","onMounted","onScroll","onUnmounted","watch","val","oldVal"],"mappings":"o7CASA,MAAMA,EAAgBC,IAEhBC,EAAgBC,EAAS,IAAM,CAC7B,MAAAC,EAAQJ,EAAc,SAAS,QAAQ,OAAO,UAAUK,GAAQA,IAAS,IAAI,EAC7EC,EAAwBN,EAAc,SAAS,QAAQ,OAAO,KAAK,CAACK,EAAME,IAC1EA,EAAIH,GAASC,IAAS,KACpBL,EAAc,SAAS,IAAI,cAAgB,cAAgBK,IAAS,aAC/D,GAEFL,EAAc,SAAS,QAAQK,CAAI,EAErC,EACR,EACM,MAAA,CAAC,CAAC,OAAQ,WAAW,EAAE,SAASL,EAAc,SAAS,KAAK,IAAI,GAAKM,CAAA,CAC7E,EAEKE,EAAYC,EAAI,CAAC,EACjBC,EAAeD,EAAI,EAAK,EACxBE,EAAeR,EAAS,IAAM,CAClC,MAAMS,EAAeZ,EAAc,SAAS,OAAO,OAAS,OAAO,SAAS,iBAAiB,SAAS,iBAAmB,SAAS,IAAI,EAAE,iBAAiB,mBAAmB,CAAC,EAAI,EAC3Ka,EAAgBX,EAAc,MAAQ,OAAO,SAAS,iBAAiB,SAAS,iBAAmB,SAAS,IAAI,EAAE,iBAAiB,oBAAoB,CAAC,EAAI,EAClK,OAAOU,EAAeC,CAAA,CACvB,EACDC,EAAU,IAAM,CACP,OAAA,iBAAiB,SAAUC,CAAQ,CAAA,CAC3C,EACDC,EAAY,IAAM,CACT,OAAA,oBAAoB,SAAUD,CAAQ,CAAA,CAC9C,EACD,SAASA,GAAW,CAClBP,EAAU,OAAS,SAAS,iBAAmB,SAAS,MAAM,SAChE,CACM,OAAAS,EAAAT,EAAW,CAACU,EAAKC,IAAW,CACnBT,EAAA,MAAQV,EAAc,SAAS,OAAO,OAAS,UAAYkB,EAAMC,GAAUD,EAAMP,EAAa,KAAA,CAC5G"}